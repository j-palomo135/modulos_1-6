<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Consolidado Cisco — Módulos 1–6 (PRO)</title>
<meta name="description" content="Versión enriquecida del consolidado de los módulos 1 a 6 del curso Conceptos Básicos de Redes - NetAcad. Interactivo, responsive y educativo.">
<style>
  /* =========================
     Cisco PRO — Azul / Gris / Oscuro (degradados suaves)
     ========================= */
  :root{
    --bg-1: #f4f8fb;
    --bg-2: #e9f2fb;
    --panel: #ffffff;
    --muted: #6b7b86;
    --text: #072235;
    --accent1: #0066b3; /* Cisco-blue darker */
    --accent2: #1fb3ff; /* lighter blue */
    --accent3: #0b3b5a; /* deep navy */
    --glass: rgba(11,59,90,0.06);
    --card-shadow: 0 12px 40px rgba(7,34,53,0.08);
    --btn-shadow: 0 8px 20px rgba(6,24,44,0.08);
    --radius: 12px;
    --ease: cubic-bezier(.2,.9,.3,1);
    --maxw: 1400px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, system-ui; background:linear-gradient(180deg,var(--bg-1),var(--bg-2)); color:var(--text); -webkit-font-smoothing:antialiased;}
  a{color:inherit}
  /* Layout */
  .app{display:flex;min-height:100vh;align-items:stretch;}
  /* Sidebar */
  .sidebar{
    width:320px;min-width:260px;padding:28px 20px;background:linear-gradient(180deg, var(--accent1), var(--accent3));
    color:white;position:fixed;left:0;top:0;bottom:0;display:flex;flex-direction:column;gap:18px;box-shadow:var(--card-shadow);
  }
  .brand{display:flex;gap:12px;align-items:center}
  .logo{
    width:62px;height:62px;border-radius:14px;background:linear-gradient(135deg,rgba(255,255,255,0.18),rgba(255,255,255,0.06));
    display:flex;align-items:center;justify-content:center;font-weight:900;font-size:22px;color:var(--panel);
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.04);
  }
  .brand h1{font-size:16px;margin:0}
  .brand p{margin:0;font-size:13px;opacity:0.95}
  .menu{display:flex;flex-direction:column;gap:10px;overflow:auto;padding-right:6px;margin-top:8px}
  .menu button{
    background:transparent;border:none;color:inherit;text-align:left;padding:10px;border-radius:10px;display:flex;gap:12px;align-items:center;font-weight:800;cursor:pointer;transition:all .22s var(--ease);
  }
  .menu button .num{width:40px;height:40px;border-radius:9px;background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;font-weight:900}
  .menu button:hover{transform:translateX(6px);background:rgba(255,255,255,0.04)}
  .menu button.active{background:linear-gradient(90deg,rgba(255,255,255,0.12),rgba(255,255,255,0.06));box-shadow:inset 0 1px 0 rgba(255,255,255,0.03)}
  .sidebar .note{margin-top:auto;font-size:13px;color:rgba(255,255,255,0.92);opacity:0.95}
  .sidebar .hint{font-size:12px;opacity:0.85}
  /* Main */
  .main{margin-left:320px;padding:28px 36px;width:calc(100% - 320px)}
  .container{max-width:var(--maxw);margin:0 auto}
  header.top{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .title{font-size:22px;font-weight:900}
  .subtitle{color:var(--muted);font-size:14px}

  /* Module card */
  section.module{
    background:linear-gradient(180deg,var(--panel), #fbfeff);border-radius:var(--radius);
    padding:26px;margin-bottom:28px;box-shadow:var(--card-shadow);scroll-margin-top:28px;
  }
  section.module h2{font-size:20px;margin:0 0 6px 0;color:var(--accent1)}
  section.module .lead{color:var(--muted);margin-bottom:14px}
  section.module h3{margin-top:14px;color:var(--accent3)}
  section.module p{line-height:1.6;margin-top:10px;color:#12323f}
  .row{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:start}
  .panel{background:linear-gradient(180deg,#fff,#f7fbff);padding:14px;border-radius:10px;border:1px solid rgba(2,10,30,0.03)}
  .panel h4{margin:0 0 8px 0}
  .kpis{display:flex;gap:10px;margin-top:8px;flex-direction:column}
  .kpi{background:var(--glass);padding:10px;border-radius:8px;text-align:left}
  .kpi strong{display:block;font-size:15px;color:var(--accent3)}
  /* Accordion style */
  .accordion{margin-top:12px}
  .acc-item{border-radius:10px;margin-bottom:8px;overflow:hidden;border:1px solid rgba(6,24,44,0.04);background:linear-gradient(180deg,#fff,#fbfdff)}
  .acc-header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;cursor:pointer;font-weight:800}
  .acc-header .label{display:flex;gap:10px;align-items:center}
  .acc-header svg{opacity:0.9}
  .acc-body{max-height:0;overflow:hidden;padding:0 14px;transition:max-height .36s var(--ease);border-top:1px dashed rgba(6,24,44,0.03)}
  .acc-body.open{padding:12px 14px;max-height:800px}
  .acc-body p{margin:0;color:#15323f}
  /* small info box */
  .info-box{background:linear-gradient(90deg,rgba(0,102,179,0.04),rgba(31,179,255,0.02));padding:10px;border-radius:8px;border:1px solid rgba(0,102,179,0.06);margin-top:10px}
  /* Quiz */
  .quiz{margin-top:16px;padding:12px;border-radius:10px;border:1px solid rgba(2,10,30,0.03);background:linear-gradient(180deg,#fff,#f8fbff)}
  .question{font-weight:900;margin-top:10px}
  .options{margin-top:10px;display:flex;flex-direction:column;gap:8px}
  .opt{padding:10px;border-radius:8px;border:1px solid rgba(2,10,30,0.03);cursor:pointer;background:white;transition:all .18s var(--ease);font-weight:700}
  .opt:hover{transform:translateX(6px)}
  .opt.correct{background:linear-gradient(90deg,#e6fff3,#d7ffee);border-color:#00b37a}
  .opt.wrong{background:linear-gradient(90deg,#fff1f1,#ffecec);border-color:#ff6b6b}
  .opt.disabled{opacity:0.7;pointer-events:none}
  .feedback{margin-top:8px;color:var(--muted);font-weight:700}
  .quiz-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
  .btn{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:800;box-shadow:var(--btn-shadow);transition:all .18s var(--ease)}
  .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white}
  .btn.ghost{background:transparent;border:1px solid rgba(6,24,44,0.06)}
  .score-pill{background:rgba(11,59,90,0.06);padding:8px 12px;border-radius:999px;font-weight:900}

  /* Footer */
  footer{margin-top:24px;color:var(--muted);text-align:center;padding-bottom:40px}

  /* Responsive */
  @media (max-width:1100px){
    .row{grid-template-columns:1fr}
    .sidebar{position:fixed;height:64px;bottom:auto;display:flex;flex-direction:row;gap:8px;padding:12px;align-items:center;width:100%;left:0;top:0}
    .sidebar .menu{flex-direction:row;gap:6px;overflow:auto}
    .main{margin-left:0;padding-top:86px}
  }
  @media (max-width:700px){
    .menu button .num{width:32px;height:32px}
    .logo{width:44px;height:44px}
  }

  /* small helpers */
  .muted{color:var(--muted)}
  .tiny{font-size:13px;color:var(--muted)}
  .hr{height:1px;background:linear-gradient(90deg,transparent,rgba(6,24,44,0.04),transparent);margin:10px 0;border-radius:2px}
</style>
</head>
<body>
<div class="app" id="app">
  <aside class="sidebar" aria-label="Navegación principal">
    <div class="brand">
      <div class="logo" aria-hidden="true">C</div>
      <div>
        <h1 style="margin:0">Conceptos Básicos de Redes</h1>
        <p style="margin:0;font-size:13px">Consolidado · Módulos 1–6 · Versión PRO</p>
      </div>
    </div>

    <nav class="menu" role="navigation" aria-label="Módulos">
      <button class="active" data-target="m1" onclick="gotoModule('m1')"><span class="num">1</span> <span>Módulo 1</span></button>
      <button data-target="m2" onclick="gotoModule('m2')"><span class="num">2</span> <span>Módulo 2</span></button>
      <button data-target="m3" onclick="gotoModule('m3')"><span class="num">3</span> <span>Módulo 3</span></button>
      <button data-target="m4" onclick="gotoModule('m4')"><span class="num">4</span> <span>Módulo 4</span></button>
      <button data-target="m5" onclick="gotoModule('m5')"><span class="num">5</span> <span>Módulo 5</span></button>
      <button data-target="m6" onclick="gotoModule('m6')"><span class="num">6</span> <span>Módulo 6</span></button>
    </nav>

    <div class="note">
      <div class="hint">Interactúa con cada módulo: abre conceptos, practica y evalúa. Diseño: azul / gris / oscuro.</div>
      <div style="height:8px"></div>
      <div class="tiny">Archivo único: <strong>index_pro_cisco.html</strong></div>
    </div>
  </aside>

  <main class="main" role="main">
    <div class="container">
      <header class="top">
        <div>
          <div class="title">Consolidado PRO — Conceptos Básicos de Redes</div>
          <div class="subtitle">Contenido ampliado, ejercicios y autoevaluaciones por módulo</div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <button class="btn ghost" onclick="prevModule()">← Anterior</button>
          <button class="btn primary" onclick="nextModule()">Siguiente →</button>
        </div>
      </header>

      <!-- ================= MODULE 1 ================= -->
      <section class="module" id="m1" tabindex="0" aria-label="Módulo 1">
        <h2>Módulo 1 — Comunicación en un mundo conectado</h2>
        <div class="lead">Introducción a redes, importancia de la comunicación, analogías y elementos básicos.</div>

        <div class="row">
          <div>
            <h3>Introducción</h3>
            <p>Las redes conectan personas y dispositivos. Entender las piezas, cómo se comunican y por qué las redes son importantes es la base para todo profesional de TI.</p>

            <div class="accordion" id="m1-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m1-lan">
                  <div class="label">
                    <!-- icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 6h16M4 12h10M4 18h16" stroke="#0b3b5a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    <div>
                      <div style="font-weight:900">Tipos de redes (LAN / WAN / SOHO)</div>
                      <div class="tiny">Haz clic para ver definiciones y ejemplos</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m1-lan">
                  <p><strong>LAN (Local Area Network):</strong> Red en un área limitada (casa, oficina). Ejemplo: PCs y una impresora compartida en una oficina.</p>
                  <p><strong>WAN (Wide Area Network):</strong> Red que cubre grandes áreas: Internet es la WAN más grande.</p>
                  <p><strong>SOHO:</strong> Pequeñas redes de oficina en casa; suelen usar routers domésticos con NAT y DHCP.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m1-mid">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="6" r="2.2" stroke="#0b3b5a" stroke-width="1.6"/><circle cx="6" cy="18" r="2.2" stroke="#0b3b5a" stroke-width="1.6"/><circle cx="18" cy="18" r="2.2" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Dispositivos: Host, Switch, Router</div>
                      <div class="tiny">Qué hacen y cómo se relacionan</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m1-mid">
                  <p><strong>Host:</strong> Dispositivo final (ordenadores, móviles).</p>
                  <p><strong>Switch:</strong> Conecta dispositivos dentro de la misma LAN, aprende direcciones MAC y hace conmutación eficiente.</p>
                  <p><strong>Router:</strong> Conecta redes diferentes y decide rutas de paquetes basándose en direcciones IP.</p>
                  <div class="info-box">Ejemplo práctico: el router de casa conecta tu LAN a la WAN (Internet). Los switches conectan PCs y consolas a la red interna.</div>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m1-terms">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v18" stroke="#0b3b5a" stroke-width="1.6" stroke-linecap="round"/><path d="M3 12h18" stroke="#0b3b5a" stroke-width="1.6" stroke-linecap="round"/></svg>
                    <div>
                      <div style="font-weight:900">Términos clave</div>
                      <div class="tiny">Ancho de banda, latencia, throughput</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m1-terms">
                  <p><strong>Ancho de banda:</strong> Capacidad máxima teórica de un enlace (ej. 100 Mbps).</p>
                  <p><strong>Latencia:</strong> Tiempo que tarda un paquete en ir y volver (ms).</p>
                  <p><strong>Throughput:</strong> Rendimiento real observado (puede ser menor que el ancho de banda por congestión o errores).</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m1-analogy">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" stroke="#0b3b5a" stroke-width="1.6" stroke-linecap="round"/></svg>
                    <div>
                      <div style="font-weight:900">Analogía: red como carreteras</div>
                      <div class="tiny">Vehículos = datos, calles = switches, intersecciones = routers</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m1-analogy">
                  <p>Los datos viajan como vehículos: si la carretera (enlace) es ancha (alto ancho de banda) caben más vehículos; si hay semáforos lentos (latencia) tardan más en pasar.</p>
                </div>
              </div>
            </div>

            <!-- Extra content -->
            <h3>Ejercicio práctico</h3>
            <p>Lista los dispositivos conectados en tu casa y determina si están en la LAN (por cable) o por Wi-Fi. Identifica el router y los puertos LAN.</p>

            <!-- Autoevaluación -->
            <div class="quiz" data-module="m1">
              <div class="question">1) ¿Cuál es la función principal de un router?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this, 'm1')">Encaminar paquetes entre redes</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Almacenar archivos grandes</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Convertir formatos de video</div>
              </div>
              <div class="question">2) ¿Qué representa ancho de banda?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this, 'm1')">Capacidad máxima del enlace</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">El tiempo de ida y vuelta</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Una dirección IP</div>
              </div>
              <div class="question">3) ¿Qué dispositivo conecta hosts dentro de una LAN?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this, 'm1')">Switch</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Módem</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">DNS</div>
              </div>
              <div class="question">4) Latencia mide:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this, 'm1')">Tiempo que tarda un paquete en ir y volver</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Capacidad del enlace</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Número de dispositivos</div>
              </div>
              <div class="question">5) ¿Qué es throughput?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this, 'm1')">Rendimiento real observado</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Tipo de cable</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this, 'm1')">Un protocolo</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 1: <span class="score-pill" id="score-m1">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m1')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m1')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel" aria-hidden="false">
            <h4>Resumen rápido</h4>
            <p class="muted">Conceptos: LAN/WAN, Hosts, Switches, Routers, Ancho de banda y latencia.</p>
            <div class="hr"></div>
            <div class="kpis">
              <div class="kpi"><strong>Principio</strong><span class="tiny">Interconexión y comunicación</span></div>
              <div class="kpi"><strong>Analogía</strong><span class="tiny">Red = carreteras</span></div>
            </div>
            <div style="margin-top:12px">
              <div class="tiny">Consejo: documenta IPs y puertos en tu red doméstica. Mantén contraseñas seguras.</div>
            </div>
          </aside>
        </div>
      </section>

      <!-- ================= MODULE 2 ================= -->
      <section class="module" id="m2" tabindex="0" aria-label="Módulo 2">
        <h2>Módulo 2 — Componentes, tipos y conexiones</h2>
        <div class="lead">Dispositivos de red, arquitectura cliente/servidor, medios físicos y conexión al ISP.</div>

        <div class="row">
          <div>
            <h3>Roles y dispositivos</h3>
            <p>Distinguimos entre hosts, dispositivos intermedios y equipos de infraestructura. Conocer los roles te ayuda a planear y solucionar problemas.</p>

            <div class="accordion" id="m2-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m2-isp">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2v20" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Conexión ISP</div>
                      <div class="tiny">Módems, ONT, tecnologías</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m2-isp">
                  <p>El proveedor entrega la conexión (DSL, cable, fibra). El módem/ONT adapta la señal y el router la distribuye internamente.</p>
                  <p>Ejemplo: FTTH (Fiber To The Home) ofrece alta capacidad con baja latencia.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m2-cables">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="4" y="6" width="16" height="12" rx="2" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Tipos de cable</div>
                      <div class="tiny">Cat5e, Cat6, coaxial, fibra</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m2-cables">
                  <p><strong>Par trenzado (Cat5e/Cat6):</strong> Usados en LAN; Cat6 soporta mayores velocidades.</p>
                  <p><strong>Coaxial:</strong> Usado por algunos ISPs; robusto para señales de RF.</p>
                  <p><strong>Fibra óptica:</strong> Mayor capacidad; ideal para backbones.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m2-topo">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 3v6M12 15v6" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Topologías y diagramas</div>
                      <div class="tiny">Documenta la topología física y lógica</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m2-topo">
                  <p>Documenta la topología: estrellas, anillos, mallas. Mantén mapas de IP y etiquetas de puertos para mantenimiento y escalabilidad.</p>
                </div>
              </div>
            </div>

            <h3>Ejemplo práctico</h3>
            <p>En una oficina pequeña, dibuja un diagrama con router, switch y PCs. Marca IPs y puertos.</p>

            <div class="quiz" data-module="m2">
              <div class="question">1) ¿Qué dispositivo conecta redes diferentes?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m2')">Router</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Switch</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Hub</div>
              </div>
              <div class="question">2) ¿Cuál es mejor para largas distancias?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m2')">Fibra óptica</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Cat5e</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Bluetooth</div>
              </div>
              <div class="question">3) ¿Qué documentar en la topología?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m2')">IP, puertos y etiquetas</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Contraseñas públicas</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Registro de aplicacion</div>
              </div>
              <div class="question">4) ¿Qué equipo convierte la señal ISP?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m2')">Módem / ONT</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Switch</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Hub</div>
              </div>
              <div class="question">5) ¿Cuál es una buena práctica?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m2')">Etiquetar cables y puertos</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">No documentar la red</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m2')">Usar contraseñas 'admin'</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 2: <span class="score-pill" id="score-m2">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m2')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m2')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel">
            <h4>Resumen rápido</h4>
            <p class="muted">Medios: cobre, fibra; Roles: ISP, módem, router, switch.</p>
            <div class="hr"></div>
            <div class="tiny">Buenas prácticas: mapear direcciones IP, etiquetado físico y documentación de la topología.</div>
          </aside>
        </div>
      </section>

      <!-- ================= MODULE 3 ================= -->
      <section class="module" id="m3" tabindex="0" aria-label="Módulo 3">
        <h2>Módulo 3 — Redes inalámbricas y móviles</h2>
        <div class="lead">Tecnologías inalámbricas (Wi-Fi, Bluetooth, NFC) y recomendaciones de seguridad.</div>

        <div class="row">
          <div>
            <h3>Wi-Fi: bandas, canales y rendimiento</h3>
            <p>Entender bandas (2.4 GHz vs 5 GHz) y selección de canales es vital para rendimiento y cobertura.</p>

            <div class="accordion" id="m3-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m3-bands">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M2 12h20" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Bandas Wi-Fi</div>
                      <div class="tiny">2.4 GHz, 5 GHz y 6 GHz</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m3-bands">
                  <p><strong>2.4 GHz:</strong> mayor alcance, más interferencias (microondas, dispositivos IoT).</p>
                  <p><strong>5 GHz:</strong> mayor capacidad, menor alcance; ideal para streaming y gaming.</p>
                  <p><strong>6 GHz:</strong> nueva banda para Wi-Fi 6E con aún más capacidad (si está disponible).</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m3-security">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="3" y="6" width="18" height="12" rx="2" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Seguridad inalámbrica</div>
                      <div class="tiny">WPA2, WPA3 y prácticas</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m3-security">
                  <p>Usa WPA2 o, preferiblemente, WPA3. Cambia contraseñas por defecto del router, desactiva WPS y crea redes de invitados para visitantes.</p>
                </div>
              </div>
            </div>

            <h3>Ejemplo práctico</h3>
            <p>Configura una red de invitados en tu router y prueba la separación de tráfico.</p>

            <div class="quiz" data-module="m3">
              <div class="question">1) ¿Qué banda suele estar más congestionada?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m3')">2.4 GHz</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">5 GHz</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">6 GHz</div>
              </div>
              <div class="question">2) Recomendación de seguridad inalámbrica:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m3')">Usar WPA2/WPA3 y cambiar contraseñas</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Dejar SSID y contraseña por defecto</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Habilitar WPS para facilidad</div>
              </div>
              <div class="question">3) ¿Qué es Wi-Fi 6E?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m3')">Uso de la banda 6 GHz</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Una marca de router</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Un estándar Bluetooth</div>
              </div>
              <div class="question">4) Para redes públicas, se sugiere:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m3')">Usar VPN</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Conectarse sin precauciones</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Cerrar la sesión del router</div>
              </div>
              <div class="question">5) Bluetooth se usa para:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m3')">Dispositivos de corto alcance</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Conexión de backbone</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m3')">Enrutamiento IP</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 3: <span class="score-pill" id="score-m3">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m3')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m3')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel">
            <h4>Resumen rápido</h4>
            <p class="muted">Wi-Fi: 2.4/5/6 GHz. Seguridad: WPA2/WPA3. Usa redes de invitados.</p>
          </aside>
        </div>
      </section>

      <!-- ================= MODULE 4 ================= -->
      <section class="module" id="m4" tabindex="0" aria-label="Módulo 4">
        <h2>Módulo 4 — Redes domésticas y seguridad</h2>
        <div class="lead">Cómo montar una red doméstica segura y mejores prácticas.</div>

        <div class="row">
          <div>
            <h3>Arquitectura doméstica</h3>
            <p>ISP → módem/ONT → router → switch / AP → hosts. DHCP, NAT y políticas de seguridad ofrecen gestión básica.</p>

            <div class="accordion" id="m4-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m4-passwords">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect x="4" y="8" width="16" height="12" rx="2" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Contraseñas y actualización</div>
                      <div class="tiny">Cambio de credenciales y firmware</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m4-passwords">
                  <p>Cambiar las credenciales por defecto y actualizar el firmware son pasos clave. Asegura que el software del router esté al día para mitigar vulnerabilidades.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m4-segmentation">
                  <div class="label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4 12h16" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Segmentación: invitados / IoT</div>
                      <div class="tiny">Proteger dispositivos críticos</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m4-segmentation">
                  <p>Separa IoT y visitantes del segmento de trabajo principal. Esto reduce exposición y riesgos de propagación.</p>
                </div>
              </div>
            </div>

            <h3>Ejemplo práctico</h3>
            <p>Configura red de invitados en el router y prueba acceso limitado a recursos compartidos.</p>

            <div class="quiz" data-module="m4">
              <div class="question">1) ¿Qué mejora la seguridad doméstica?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m4')">Separar red de invitados / IoT</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Usar 'admin' como contraseña</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">No actualizar firmware</div>
              </div>
              <div class="question">2) ¿Por qué actualizar firmware?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m4')">Cerrar vulnerabilidades</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Solo estético</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Aumentar ancho de banda</div>
              </div>
              <div class="question">3) ¿Qué evitar en contraseñas?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m4')">Usar 'admin' por defecto</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Contraseñas robustas</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">2FA</div>
              </div>
              <div class="question">4) Segmentar la red permite:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m4')">Limitar acceso entre dispositivos</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Conectar todo libremente</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Aumentar la latencia</div>
              </div>
              <div class="question">5) ¿Se debe cambiar la contraseña del router?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m4')">Sí, por seguridad</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">No, mantener la que viene</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m4')">Compartirla públicamente</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 4: <span class="score-pill" id="score-m4">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m4')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m4')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel">
            <h4>Resumen rápido</h4>
            <p class="muted">Segmenta tu red, cambia contraseñas y actualiza firmware. Usa redes de invitados para IoT/visitantes.</p>
          </aside>
        </div>
      </section>

      <!-- ================= MODULE 5 ================= -->
      <section class="module" id="m5" tabindex="0" aria-label="Módulo 5">
        <h2>Módulo 5 — Principios y protocolos</h2>
        <div class="lead">Modelos, protocolos y direcciones: cómo se organizan las comunicaciones por capas.</div>

        <div class="row">
          <div>
            <h3>Protocolos y modelos</h3>
            <p>Los protocolos son reglas que permiten que sistemas distintos se comuniquen. Los modelos (OSI, TCP/IP) ayudan a entender funciones por capas.</p>

            <div class="accordion" id="m5-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m5-proto">
                  <div class="label">
                    <svg width="20" height="20"><path d="M4 6h16M4 12h16M4 18h16" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Protocolos clave</div>
                      <div class="tiny">TCP, UDP, HTTP, DNS</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m5-proto">
                  <p><strong>TCP:</strong> conexión fiable, entrega ordenada. <strong>UDP:</strong> sin conexión, rápido, para streaming/VoIP.</p>
                  <p><strong>HTTP/HTTPS:</strong> protocolos de la web. <strong>DNS:</strong> resuelve nombres a IPs.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m5-models">
                  <div class="label">
                    <svg width="20" height="20"><rect x="3" y="6" width="18" height="12" rx="2" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Modelos: OSI vs TCP/IP</div>
                      <div class="tiny">Capas y responsabilidades</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m5-models">
                  <p>OSI (7 capas) es un modelo didáctico; TCP/IP (4 capas) es el práctico. Comprende cómo los datos viajan desde la capa de aplicación hasta la física.</p>
                </div>
              </div>
            </div>

            <h3>Ejercicio práctico</h3>
            <p>Usa herramientas de desarrollador (navegador) para observar peticiones HTTP y entender cabeceras y respuestas.</p>

            <div class="quiz" data-module="m5">
              <div class="question">1) ¿Qué protocolo garantiza entrega ordenada y fiable?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m5')">TCP</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">UDP</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">ARP</div>
              </div>
              <div class="question">2) DNS se usa para:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m5')">Resolver nombres a direcciones IP</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Encriptar datos</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Controlar switches</div>
              </div>
              <div class="question">3) OSI tiene cuántas capas?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m5')">7</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">4</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">3</div>
              </div>
              <div class="question">4) UDP es apropiado para:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m5')">Streaming y VoIP</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Transferencia segura de archivos</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Autenticación</div>
              </div>
              <div class="question">5) ¿Qué identifica una dirección MAC?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m5')">Una interfaz física de red</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Un sitio web</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m5')">Un dominio DNS</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 5: <span class="score-pill" id="score-m5">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m5')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m5')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel">
            <h4>Resumen rápido</h4>
            <p class="muted">Protocolos: TCP/UDP/HTTP/DNS. Modelos: OSI (7 capas) y TCP/IP (4 capas).</p>
          </aside>
        </div>
      </section>

      <!-- ================= MODULE 6 ================= -->
      <section class="module" id="m6" tabindex="0" aria-label="Módulo 6">
        <h2>Módulo 6 — Medios de transmisión</h2>
        <div class="lead">Comparativa entre par trenzado, coaxial, fibra y medios inalámbricos — cómo elegir.</div>

        <div class="row">
          <div>
            <h3>Medios físicos y decisiones</h3>
            <p>Seleccionar medio depende de distancia, capacidad, costo y entorno (interferencias, seguridad).</p>

            <div class="accordion" id="m6-acc">
              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m6-cables">
                  <div class="label">
                    <svg width="20" height="20"><path d="M2 12h20" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Par trenzado (Cat5e/Cat6)</div>
                      <div class="tiny">Usos en LAN y límites</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m6-cables">
                  <p>Cat5e: hasta 1 Gbps en distancias cortas. Cat6: mayor capacidad y mejor protección contra diafonía.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m6-fiber">
                  <div class="label">
                    <svg width="20" height="20"><circle cx="12" cy="12" r="10" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Fibra óptica</div>
                      <div class="tiny">Capacidad y distancia</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m6-fiber">
                  <p>Fibra: transmisión por luz, ideal para backbones y largos tramos. Tiene baja atenuación y alta capacidad.</p>
                </div>
              </div>

              <div class="acc-item">
                <div class="acc-header" onclick="toggleAcc(this)" data-acc="m6-wireless">
                  <div class="label">
                    <svg width="20" height="20"><path d="M4 12h16" stroke="#0b3b5a" stroke-width="1.6"/></svg>
                    <div>
                      <div style="font-weight:900">Wireless</div>
                      <div class="tiny">Flexibilidad y desafíos</div>
                    </div>
                  </div>
                  <div class="chev">⯈</div>
                </div>
                <div class="acc-body" id="m6-wireless">
                  <p>Wireless facilita movilidad pero trae problemas de interferencia y seguridad; requiere diseño cuidadoso de ubicación y canales.</p>
                </div>
              </div>
            </div>

            <h3>Ejemplo práctico</h3>
            <p>Compara costos y beneficios para decidir entre cableado interno (Cat6) vs FTTH fibra para conexión externa.</p>

            <div class="quiz" data-module="m6">
              <div class="question">1) ¿Qué medio es el más apropiado para largas distancias y gran capacidad?</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m6')">Fibra óptica</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Par trenzado</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Bluetooth</div>
              </div>
              <div class="question">2) Cat6 mejora frente a Cat5e en:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m6')">Mayor capacidad y menos diafonía</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Menor costo</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Mayor interferencia</div>
              </div>
              <div class="question">3) Ventaja de fibra:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m6')">Baja atenuación y alta capacidad</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Fácil de empalmar sin herramientas</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Barata por metro</div>
              </div>
              <div class="question">4) Wireless requiere especial atención en:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m6')">Planificación de canales y seguridad</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Solo cobertura</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Reducir dispositivos</div>
              </div>
              <div class="question">5) Coaxial históricamente se usó en:</div>
              <div class="options">
                <div class="opt" data-correct="true" onclick="quizAnswer(event,this,'m6')">Servicios de TV e internet por cable</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Wi-Fi</div>
                <div class="opt" data-correct="false" onclick="quizAnswer(event,this,'m6')">Bluetooth</div>
              </div>

              <div class="quiz-footer">
                <div class="tiny">Puntuación módulo 6: <span class="score-pill" id="score-m6">0 / 5</span></div>
                <div style="display:flex;gap:8px">
                  <button class="btn ghost" onclick="resetQuiz('m6')">Reset</button>
                  <button class="btn primary" onclick="showModuleReport('m6')">Ver informe</button>
                </div>
              </div>
            </div>

          </div>

          <aside class="panel">
            <h4>Resumen rápido</h4>
            <p class="muted">Cat5e/Cat6 para LAN, fibra para backbone, wireless para movilidad.</p>
          </aside>
        </div>
      </section>

      <footer>
        <div>Archivo: <strong>index_pro_cisco.html</strong> — Diseño: Azul / Gris / Oscuro · Interactivo · Responsive</div>
        <div class="tiny" style="margin-top:6px;color:var(--muted)">Si quieres exportar todo para entrega, sube solo este archivo. (El PDF ya no forma parte del sitio).</div>
      </footer>
    </div>
  </main>
</div>

<script>
/* =========================
   JS: navegación, accordions, quizzes, scoring
   ========================= */

/* Navigation / menu active handling */
const menuBtns = document.querySelectorAll('.menu button');
const modules = ['m1','m2','m3','m4','m5','m6'];

function clearActiveMenu() {
  menuBtns.forEach(b=>b.classList.remove('active'));
}
function gotoModule(id){
  clearActiveMenu();
  const btn = document.querySelector(`.menu button[data-target="${id}"]`);
  if(btn) btn.classList.add('active');
  const el = document.getElementById(id);
  if(el){
    el.scrollIntoView({behavior:'smooth',block:'start'});
    el.focus({preventScroll:true});
  }
}
function currentIndex(){
  let idx = 0;
  for(let i=0;i<modules.length;i++){
    const el = document.getElementById(modules[i]);
    const rect = el.getBoundingClientRect();
    if(rect.top >= 0 && rect.top < window.innerHeight*0.45){ idx = i; break; }
    if(i === modules.length-1) idx = modules.length-1;
  }
  return idx;
}
function prevModule(){ const i=currentIndex(); gotoModule(modules[Math.max(0,i-1)]); }
function nextModule(){ const i=currentIndex(); gotoModule(modules[Math.min(modules.length-1,i+1)]); }

/* Scroll listener: update active menu */
window.addEventListener('scroll', ()=>{
  const fromTop = window.scrollY + 200;
  modules.forEach((id, index)=>{
    const section = document.getElementById(id);
    if(section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop){
      clearActiveMenu();
      if(menuBtns[index]) menuBtns[index].classList.add("active");
    }
  });
});

/* Accordion toggles */
function toggleAcc(header){
  const id = header.getAttribute('data-acc');
  const body = document.getElementById(id);
  if(!body) return;
  const open = body.classList.toggle('open');
  // rotate arrow indicator
  header.querySelector('.chev').textContent = open ? '⯆' : '⯈';
  if(open) {
    body.scrollIntoView({behavior:'smooth',block:'center'});
  }
}

/* QUIZ logic: track per module answers and scoring */
const moduleState = {}; // store answered count and correct count per module

function initModuleState(){
  modules.forEach(m => {
    moduleState[m] = {answered:0, correct:0, total:5};
    updateScoreDisplay(m);
  });
}
function updateScoreDisplay(moduleId){
  const el = document.getElementById('score-' + moduleId.replace('m','m'));
  if(el) el.textContent = `${moduleState[moduleId].correct} / ${moduleState[moduleId].total}`;
}

/* When user clicks an option */
function quizAnswer(evt, el, moduleId){
  // guard: if already disabled don't allow
  if(el.classList.contains('disabled')) return;
  const parentOptions = el.parentElement;
  // disable all options for this question
  parentOptions.querySelectorAll('.opt').forEach(o => { o.classList.add('disabled'); o.style.pointerEvents='none'; });
  const correct = el.dataset.correct === 'true';
  const feedbackNode = parentOptions.parentElement.querySelector('.feedback');
  // mark
  if(correct){
    el.classList.add('correct');
    moduleState[moduleId].correct += 1;
    if(feedbackNode) feedbackNode.textContent = "✅ Correcto — buena elección.";
  } else {
    el.classList.add('wrong');
    if(feedbackNode) feedbackNode.textContent = "❌ Incorrecto. Revisa la sección correspondiente para reforzar.";
    // highlight correct option
    parentOptions.querySelectorAll('.opt').forEach(o => {
      if(o.dataset.correct === "true") o.classList.add('correct');
    });
  }
  moduleState[moduleId].answered += 1;
  updateScoreDisplay(moduleId);
  // small animation
  el.animate([{transform:'translateX(0)'},{transform:'translateX(4px)'}], {duration:180, easing:'ease'});
}

/* Reset quiz for a module */
function resetQuiz(moduleId){
  // find the quiz container by data-module
  const quiz = document.querySelector(`.quiz[data-module="${moduleId}"]`);
  if(!quiz) return;
  // reset option classes and enabled
  quiz.querySelectorAll('.opt').forEach(o => { o.classList.remove('correct','wrong','disabled'); o.style.pointerEvents='auto'; });
  // clear feedbacks
  quiz.querySelectorAll('.feedback').forEach(f => f.textContent = '');
  // reset state
  moduleState[moduleId] = {answered:0, correct:0, total:5};
  updateScoreDisplay(moduleId);
}

/* Show module report (simple modal-like alert) */
function showModuleReport(moduleId){
  const st = moduleState[moduleId];
  const percent = Math.round((st.correct / st.total) * 100);
  const msgs = {
    100: "¡Perfecto! Dominio completo del módulo.",
    80: "Muy bien — buen dominio, repasa un par de conceptos.",
    60: "Bien, pero revisa conceptos clave.",
    40: "Necesitas reforzar varios puntos. Revisa las secciones.",
    20: "Repasa el módulo: hay confusiones importantes.",
    0: "Te recomiendo leer con calma el módulo y volver a intentar."
  };
  let msg = msgs[100];
  if(percent === 100) msg = msgs[100];
  else if(percent >= 80) msg = msgs[80];
  else if(percent >= 60) msg = msgs[60];
  else if(percent >= 40) msg = msgs[40];
  else if(percent >= 20) msg = msgs[20];
  else msg = msgs[0];

  alert(`Informe — ${moduleId.toUpperCase()}\nPuntuación: ${st.correct}/${st.total} (${percent}%)\n\n${msg}`);
}

/* Initialize states on load */
initModuleState();

/* Accessibility: allow Enter on acc-headers */
document.querySelectorAll('.acc-header').forEach(h => {
  h.tabIndex = 0;
  h.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleAcc(h); }
  });
});

/* Small UX: collapse other acc bodies in same module when opening one (optional) */
document.querySelectorAll('.acc-header').forEach(h => {
  h.addEventListener('click', () => {
    // find parent accordion
    const parent = h.closest('.accordion');
    if(!parent) return;
    // close others
    parent.querySelectorAll('.acc-body').forEach(b => {
      const id = b.id;
      if(id !== h.getAttribute('data-acc') && b.classList.contains('open')) {
        b.classList.remove('open');
        // find corresponding header to change arrow
        const hdr = parent.querySelector(`.acc-header[data-acc="${b.id}"]`);
        if(hdr) hdr.querySelector('.chev').textContent = '⯈';
      }
    });
  });
});
</script>
</body>
</html>